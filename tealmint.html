<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teal Mint Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-light: #48C9B0;
            --primary-dark: #2c7b69;
            --secondary-light: #F9FDFB;
            --secondary-dark: #EAEDED;
            --deep-navy: #1C2833;
            --muted-gold: #D4AC0D;
            --soft-grey: #EAEDED;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--deep-navy);
            color: var(--soft-grey);
            transition: background-color 0.5s ease;
        }
        
        body.light-mode {
            background: linear-gradient(135deg, #48C9B0, #5DADE2);
            color: var(--deep-navy);
        }

        /* --- Custom Animations --- */
        @keyframes glowing-orbs {
            0% { transform: translate(0, 0) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translate(var(--x), var(--y)) scale(1.5); opacity: 0; }
        }

        @keyframes card-breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes typewriter {
            from { width: 0; }
        }

        @keyframes blink-caret {
            50% { border-color: transparent; }
        }

        @keyframes glowing-border {
            0% { box-shadow: 0 0 10px var(--primary-light); }
            50% { box-shadow: 0 0 20px var(--primary-light), 0 0 30px var(--primary-light); }
            100% { box-shadow: 0 0 10px var(--primary-light); }
        }

        .glowing-border-pulse {
            animation: glowing-border 2s ease-in-out infinite alternate;
        }

        .glowing-orb {
            position: absolute;
            background: rgba(72, 201, 176, 0.5);
            border-radius: 50%;
            pointer-events: none;
            will-change: transform, opacity;
            animation: glowing-orbs infinite;
        }

        .glassmorphic {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .glassmorphic-dark {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        .cursor-trail {
            position: fixed;
            z-index: 9999;
            pointer-events: none;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle, #48C9B0, transparent 60%);
            opacity: 0;
            transition: transform 0.1s ease-out, opacity 0.5s ease-out;
            will-change: transform;
        }

        .light-mode .cursor-trail {
            background: radial-gradient(circle, #1C2833, transparent 60%);
        }

        .slide-up {
            transform: translateY(100px);
            opacity: 0;
            transition: transform 1s ease-out, opacity 1s ease-out;
        }
        .slide-up.visible {
            transform: translateY(0);
            opacity: 1;
        }

        /* Edit Button Styling */
        .edit-button {
            background: linear-gradient(45deg, var(--primary-light), var(--primary-dark));
            color: var(--secondary-light);
            padding: 1rem 2rem;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 9999px;
            border: 1px solid var(--primary-light);
            box-shadow: 0 0 20px var(--primary-light);
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }
        .edit-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px var(--primary-light);
        }
        .edit-button i {
            margin-right: 0.5rem;
        }

        /* Modal Styling */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(28, 40, 51, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 101;
        }

        .modal-content {
            background: var(--glassmorphic-dark);
            backdrop-filter: blur(10px);
            border: 1px solid var(--primary-light);
            box-shadow: 0 0 20px var(--primary-light);
            padding: 2rem;
            border-radius: 1rem;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .neon-form-field {
            background: transparent;
            border: 2px solid var(--primary-light);
            box-shadow: 0 0 5px var(--primary-light), 0 0 15px var(--primary-light) inset;
            transition: box-shadow 0.3s;
        }
        .neon-form-field:focus {
            outline: none;
            box-shadow: 0 0 10px var(--primary-light), 0 0 30px var(--primary-light) inset;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-deep-navy text-soft-grey">
    <!-- Firebase Initialization and Auth -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBFoIoUsTJ_4NzkV-sdNffAOjbHRxSRIp8",
            authDomain: "echo-625fa.firebaseapp.com",
            projectId: "echo-625fa",
            storageBucket: "echo-625fa.firebasestorage.app",
            messagingSenderId: "890702112097",
            appId: "1:890702112097:web:e81927ba359a8c426c1120",
            measurementId: "G-DMBW4N7J2T"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        window.db = db;
        window.auth = auth;
        window.appId = 'default-app-id';
        window.firestore = { collection, addDoc, doc, getDoc, setDoc };

        signInAnonymously(auth).catch(error => {
            console.error('Authentication error:', error);
            document.getElementById('edit-form-status').textContent = 'Authentication failed. Please try again.';
            document.getElementById('edit-form-status').style.color = 'red';
        });
    </script>

    <!-- Theme Switcher -->
    <button id="theme-toggle" class="fixed top-4 right-4 z-[100] p-3 rounded-full bg-soft-grey text-deep-navy transition-all hover:scale-110">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
    </button>

    <!-- Edit Button -->
    <div class="fixed top-4 left-4 z-50">
        <button id="edit-button" class="edit-button">
            <i class="fas fa-edit"></i> Edit Portfolio
        </button>
    </div>

    <!-- Edit Form Modal -->
    <div id="edit-form-container" class="modal hidden">
        <div class="modal-content">
            <button id="cancel-edit" class="absolute top-4 right-4 text-3xl text-[var(--secondary-light)] hover:text-[var(--primary-light)] transition-colors duration-300">&times;</button>
            <h2 class="text-3xl font-bold text-center mb-6 text-[var(--secondary-light)]">Edit Portfolio</h2>
            <form id="edit-form" class="space-y-6">
                <div>
                    <label for="edit-name" class="block text-sm font-bold mb-2">Your Name (Required)</label>
                    <input type="text" id="edit-name" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg" required>
                </div>
                <div>
                    <label for="edit-title" class="block text-sm font-bold mb-2">Professional Title</label>
                    <input type="text" id="edit-title" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-about" class="block text-sm font-bold mb-2">About Yourself</label>
                    <textarea id="edit-about" rows="4" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg"></textarea>
                </div>
                <div>
                    <label for="edit-profile-image" class="block text-sm font-bold mb-2">Profile Image</label>
                    <input type="file" id="edit-profile-image" accept="image/*" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-skill1-name" class="block text-sm font-bold mb-2">Skill 1 Name</label>
                    <input type="text" id="edit-skill1-name" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-skill2-name" class="block text-sm font-bold mb-2">Skill 2 Name</label>
                    <input type="text" id="edit-skill2-name" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-skill3-name" class="block text-sm font-bold mb-2">Skill 3 Name</label>
                    <input type="text" id="edit-skill3-name" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-skill4-name" class="block text-sm font-bold mb-2">Skill 4 Name</label>
                    <input type="text" id="edit-skill4-name" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-skill5-name" class="block text-sm font-bold mb-2">Skill 5 Name</label>
                    <input type="text" id="edit-skill5-name" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project1-title" class="block text-sm font-bold mb-2">Project 1 Title</label>
                    <input type="text" id="edit-project1-title" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project1-desc" class="block text-sm font-bold mb-2">Project 1 Description</label>
                    <input type="text" id="edit-project1-desc" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project1-image" class="block text-sm font-bold mb-2">Project 1 Image</label>
                    <input type="file" id="edit-project1-image" accept="image/*" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project2-title" class="block text-sm font-bold mb-2">Project 2 Title</label>
                    <input type="text" id="edit-project2-title" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project2-desc" class="block text-sm font-bold mb-2">Project 2 Description</label>
                    <input type="text" id="edit-project2-desc" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project2-image" class="block text-sm font-bold mb-2">Project 2 Image</label>
                    <input type="file" id="edit-project2-image" accept="image/*" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project3-title" class="block text-sm font-bold mb-2">Project 3 Title</label>
                    <input type="text" id="edit-project3-title" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project3-desc" class="block text-sm font-bold mb-2">Project 3 Description</label>
                    <input type="text" id="edit-project3-desc" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div>
                    <label for="edit-project3-image" class="block text-sm font-bold mb-2">Project 3 Image</label>
                    <input type="file" id="edit-project3-image" accept="image/*" class="w-full p-3 bg-transparent border-2 border-[var(--primary-light)] text-[var(--soft-grey)] neon-form-field rounded-lg">
                </div>
                <div class="flex justify-between">
                    <button type="submit" class="w-full py-3 mr-2 text-lg font-bold uppercase rounded-full bg-gradient-to-r from-[var(--primary-light)] to-[var(--primary-dark)] text-[var(--secondary-light)]">Save Changes</button>
                    <button type="button" id="cancel-edit-btn" class="w-full py-3 ml-2 text-lg font-bold uppercase rounded-full border border-[var(--primary-light)] text-[var(--soft-grey)]">Cancel</button>
                </div>
                <p id="edit-form-status" class="text-center text-sm font-bold text-[var(--soft-grey)]"></p>
            </form>
        </div>
    </div>

    <!-- Floating Navbar -->
    <nav id="navbar" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 transform -translate-y-full glassmorphic-dark px-6 py-4">
        <div class="container mx-auto flex justify-center items-center space-x-8 text-lg font-bold">
            <a href="#hero" class="hover:text-primary-light transition-colors duration-300 relative group">
                Home
                <span class="absolute bottom-0 left-0 w-full h-0.5 bg-primary-light transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"></span>
            </a>
            <a href="#about" class="hover:text-primary-light transition-colors duration-300 relative group">
                About
                <span class="absolute bottom-0 left-0 w-full h-0.5 bg-primary-light transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"></span>
            </a>
            <a href="#projects" class="hover:text-primary-light transition-colors duration-300 relative group">
                Projects
                <span class="absolute bottom-0 left-0 w-full h-0.5 bg-primary-light transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"></span>
            </a>
            <a href="#contact" class="hover:text-primary-light transition-colors duration-300 relative group">
                Contact
                <span class="absolute bottom-0 left-0 w-full h-0.5 bg-primary-light transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"></span>
            </a>
        </div>
    </nav>

    <div id="particle-container" class="fixed inset-0 z-0 pointer-events-none"></div>
    <div id="cursor-trail" class="cursor-trail"></div>

    <main class="relative z-10">

        <!-- Hero Section -->
        <section id="hero" class="min-h-screen flex flex-col items-center justify-center text-center px-4">
            <div class="glassmorphic p-8 md:p-12 rounded-3xl w-full max-w-lg glowing-border-pulse transition-all duration-500 hover:scale-105">
                <h1 id="hero-title" class="text-5xl md:text-7xl font-bold">Your Name</h1>
                <p id="tagline" class="text-xl md:text-3xl mt-4">A Creative Developer</p>
                <div class="mt-8 flex justify-center space-x-4">
                    <button id="view-work-btn" class="px-6 py-3 bg-primary-light text-deep-navy font-bold rounded-full transition-all duration-300 hover:scale-105">
                        <span class="relative z-10">ðŸ“‚ View Work</span>
                    </button>
                    <button id="contact-me-btn" class="px-6 py-3 border-2 border-primary-light text-primary-light font-bold rounded-full transition-all duration-300 hover:scale-105">
                        <span class="relative z-10">ðŸ“§ Contact Me</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 px-4 slide-up">
            <div class="container mx-auto">
                <h2 class="text-4xl text-center font-bold mb-12">About Me</h2>
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div id="profile-image-container" class="relative w-64 h-64 mx-auto"></div>
                    <div class="glassmorphic-dark p-8 rounded-xl text-center md:text-left slide-up">
                        <p id="about-title" class="text-xl md:text-2xl font-bold mb-4">Crafting elegant solutions.</p>
                        <p id="about-text" class="text-lg leading-relaxed typewriter-text">
                            I am a passionate developer who finds joy in the intersection of code and design. My journey is about creating intuitive, beautiful, and performant user experiences. With every project, I aim to weave technology and artistry together, crafting digital spaces that are not just functional, but truly engaging.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section id="projects" class="py-20 px-4 slide-up">
            <div class="container mx-auto">
                <h2 class="text-4xl text-center font-bold mb-12">Projects</h2>
                <div id="projects-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Projects will be injected here -->
                </div>
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="py-20 px-4 slide-up">
            <div class="container mx-auto">
                <h2 class="text-4xl text-center font-bold mb-12">Skills Showcase</h2>
                <div id="skills-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-8 max-w-4xl mx-auto">
                    <!-- Skills will be injected here -->
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="py-20 px-4 slide-up">
            <div class="container mx-auto">
                <h2 class="text-4xl text-center font-bold mb-12">What Others Say</h2>
                <div id="testimonial-carousel" class="relative w-full overflow-hidden">
                    <div id="carousel-wrapper" class="flex transition-transform duration-500 ease-in-out">
                        <div class="carousel-item p-8 w-full shrink-0 glassmorphic-dark rounded-xl border border-primary-light">
                            <p class="italic text-lg">"Their work is not only beautiful but also incredibly functional. A true professional."</p>
                            <p class="mt-4 font-bold">- John Doe</p>
                        </div>
                        <div class="carousel-item p-8 w-full shrink-0 glassmorphic-dark rounded-xl border border-primary-light">
                            <p class="italic text-lg">"They brought my vision to life with precision and creativity. Highly recommended."</p>
                            <p class="mt-4 font-bold">- Jane Smith</p>
                        </div>
                        <div class="carousel-item p-8 w-full shrink-0 glassmorphic-dark rounded-xl border border-primary-light">
                            <p class="mt-4 italic text-lg">"A pleasure to work with. The final product exceeded all my expectations."</p>
                            <p class="mt-4 font-bold">- Alex Chen</p>
                        </div>
                    </div>
                    <button onclick="prevTestimonial()" class="absolute left-0 top-1/2 transform -translate-y-1/2 p-2 rounded-full bg-soft-grey text-deep-navy">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    </button>
                    <button onclick="nextTestimonial()" class="absolute right-0 top-1/2 transform -translate-y-1/2 p-2 rounded-full bg-soft-grey text-deep-navy">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 px-4 slide-up">
            <div class="container mx-auto">
                <h2 class="text-4xl text-center font-bold mb-12">Contact Me</h2>
                <div class="glassmorphic-dark p-8 rounded-xl max-w-lg mx-auto relative overflow-hidden">
                    <div class="absolute inset-0 z-0 opacity-50" id="bokeh-container"></div>
                    <form id="contact-form" class="space-y-6 relative z-10">
                        <div>
                            <label for="name" class="block mb-2 font-bold">Name</label>
                            <input type="text" id="name" class="w-full bg-transparent border-b-2 border-primary-light py-2 focus:outline-none focus:border-muted-gold transition-colors duration-300">
                        </div>
                        <div>
                            <label for="email" class="block mb-2 font-bold">Email</label>
                            <input type="email" id="email" class="w-full bg-transparent border-b-2 border-primary-light py-2 focus:outline-none focus:border-muted-gold transition-colors duration-300">
                        </div>
                        <div>
                            <label for="message" class="block mb-2 font-bold">Message</label>
                            <textarea id="message" rows="4" class="w-full bg-transparent border-b-2 border-primary-light py-2 focus:outline-none focus:border-muted-gold transition-colors duration-300"></textarea>
                        </div>
                        <button type="submit" class="w-full py-3 rounded-full bg-primary-light text-deep-navy font-bold transition-all duration-300 hover:scale-105 relative overflow-hidden group">
                            <span class="relative z-10">Send Message</span>
                            <div class="absolute inset-0 bg-secondary-light opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Signature Section -->
        <section id="signature-section" class="py-20 flex justify-center slide-up">
            <svg id="signature" width="300" height="100" class="stroke-primary-light fill-none stroke-[2] transition-colors duration-500">
                <path id="signature-path" d="M50,50 Q100,20 150,50 T250,50" />
            </svg>
        </section>

    </main>
    
    <!-- Modals -->
    <div id="project-modal" class="fixed inset-0 z-[101] bg-deep-navy bg-opacity-80 backdrop-blur-lg flex items-center justify-center hidden">
        <div class="relative glassmorphic-dark p-8 rounded-xl max-w-3xl w-full">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-primary-light text-2xl font-bold">&times;</button>
            <h3 id="modal-title" class="text-3xl font-bold mb-4"></h3>
            <p id="modal-description"></p>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Default data
            const defaultData = {
                name: 'Your Name',
                title: 'Professional Title',
                about: 'Here you can describe your professional journey with a creative and romantic touch. Talk about your passion, your process, and what inspires you. This section is all about connecting with your audience on a personal level.',
                profileImage: '',
                skills: [
                    { name: 'UI/UX Design', icon: 'fas fa-code' },
                    { name: 'Photography', icon: 'fas fa-code' },
                    { name: 'Illustration', icon: 'fas fa-code' },
                    { name: 'Branding', icon: 'fas fa-code' },
                    { name: 'Creative Strategy', icon: 'fas fa-code' }
                ],
                projects: [
                    { title: 'Project 1: The Art of Light', desc: 'A study on natural light in photography, capturing the soft, fleeting moments of dawn and dusk.', image: 'https://placehold.co/600x400/48C9B0/1C2833?text=Project+1' },
                    { title: 'Project 2: Creative Expressions', desc: 'An exploration of abstract art using a palette of soft pastels and flowing textures.', image: 'https://placehold.co/600x400/48C9B0/1C2833?text=Project+2' },
                    { title: 'Project 3: Elegant Brand Identity', desc: 'Development of a new brand identity for a luxury fashion client, focusing on grace and femininity.', image: 'https://placehold.co/600x400/48C9B0/1C2833?text=Project+3' }
                ]
            };

            let currentUserName = 'Your Name';

            // ImgBB API Key
            const IMGBB_API_KEY = '01400454f4aafb70d1c9beddec5cbbc5';

            // Upload image to ImgBB
            const uploadToImgBB = async (file) => {
                if (!file) return null;
                const formData = new FormData();
                formData.append('image', file);
                try {
                    const response = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
                        method: 'POST',
                        body: formData
                    });
                    const data = await response.json();
                    if (data.success) return data.data.url;
                    throw new Error('Image upload failed: ' + (data.error?.message || 'Unknown error'));
                } catch (error) {
                    throw new Error('Image upload failed: ' + error.message);
                }
            };

            // Clean object to remove undefined/null/empty values
            const cleanObject = (obj) => {
                if (Array.isArray(obj)) {
                    return obj
                        .map(item => cleanObject(item))
                        .filter(item => item !== null && item !== undefined && (typeof item !== 'object' || Object.keys(item).length > 0));
                }
                if (typeof obj !== 'object' || obj === null) return obj;
                const cleaned = {};
                Object.keys(obj).forEach(key => {
                    const value = obj[key];
                    if (value !== undefined && value !== null) {
                        if (Array.isArray(value)) {
                            const cleanedArray = cleanObject(value);
                            if (cleanedArray.length > 0) cleaned[key] = cleanedArray;
                        } else if (typeof value === 'object') {
                            const cleanedNested = cleanObject(value);
                            if (Object.keys(cleanedNested).length > 0) cleaned[key] = cleanedNested;
                        } else if (value !== '') cleaned[key] = value;
                    }
                });
                return Object.keys(cleaned).length > 0 ? cleaned : null;
            };

            // Save portfolio data to Firestore
            const savePortfolioData = async (data) => {
                try {
                    if (!data.name) {
                        document.getElementById('edit-form-status').textContent = 'Please enter your name to save.';
                        document.getElementById('edit-form-status').style.color = 'red';
                        return;
                    }
                    const docRef = window.firestore.doc(window.db, 'portfolio', data.name);
                    const cleanedData = cleanObject(data);
                    if (!cleanedData || Object.keys(cleanedData).length === 0) {
                        document.getElementById('edit-form-status').textContent = 'No valid data to save.';
                        document.getElementById('edit-form-status').style.color = 'red';
                        return;
                    }
                    await window.firestore.setDoc(docRef, cleanedData, { merge: true });
                    currentUserName = data.name;
                    document.getElementById('edit-form-status').textContent = 'Portfolio updated successfully!';
                    document.getElementById('edit-form-status').style.color = 'green';
                    await loadPortfolioData();
                    document.getElementById('edit-form-container').classList.add('hidden');
                } catch (error) {
                    console.error('Error saving data:', error);
                    document.getElementById('edit-form-status').textContent = 'Error updating portfolio: ' + error.message;
                    document.getElementById('edit-form-status').style.color = 'red';
                }
            };

            // Load portfolio data from Firestore
            const loadPortfolioData = async () => {
                try {
                    const docRef = window.firestore.doc(window.db, 'portfolio', currentUserName);
                    const docSnap = await window.firestore.getDoc(docRef);
                    const data = docSnap.exists() ? { ...defaultData, ...docSnap.data() } : defaultData;

                    // Update form fields
                    document.getElementById('edit-name').value = data.name || '';
                    document.getElementById('edit-title').value = data.title || '';
                    document.getElementById('edit-about').value = data.about || '';
                    document.getElementById('edit-skill1-name').value = data.skills[0]?.name || '';
                    document.getElementById('edit-skill2-name').value = data.skills[1]?.name || '';
                    document.getElementById('edit-skill3-name').value = data.skills[2]?.name || '';
                    document.getElementById('edit-skill4-name').value = data.skills[3]?.name || '';
                    document.getElementById('edit-skill5-name').value = data.skills[4]?.name || '';
                    document.getElementById('edit-project1-title').value = data.projects[0]?.title || '';
                    document.getElementById('edit-project1-desc').value = data.projects[0]?.desc || '';
                    document.getElementById('edit-project2-title').value = data.projects[1]?.title || '';
                    document.getElementById('edit-project2-desc').value = data.projects[1]?.desc || '';
                    document.getElementById('edit-project3-title').value = data.projects[2]?.title || '';
                    document.getElementById('edit-project3-desc').value = data.projects[2]?.desc || '';

                    // Update page content
                    document.getElementById('hero-title').textContent = data.name || defaultData.name;
                    document.getElementById('tagline').textContent = data.title || defaultData.title;
                    document.getElementById('about-title').textContent = data.title || defaultData.title;
                    document.getElementById('about-text').textContent = data.about || defaultData.about;

                    // Render profile image only if uploaded
                    const profileImageContainer = document.getElementById('profile-image-container');
                    profileImageContainer.innerHTML = '';
                    if (data.profileImage) {
                        const profileDiv = document.createElement('div');
                        profileDiv.className = 'relative w-64 h-64 rounded-full overflow-hidden border-4 border-primary-light glowing-border-pulse';
                        profileDiv.innerHTML = `<img id="profile-image" src="${data.profileImage}" alt="Profile" class="w-full h-full object-cover rounded-full">`;
                        profileImageContainer.appendChild(profileDiv);
                    }

                    // Render skills
                    const skillsContainer = document.getElementById('skills-container');
                    skillsContainer.innerHTML = '';
                    data.skills.forEach((skill, index) => {
                        const defaultSkill = defaultData.skills[index] || { name: 'Skill', icon: 'fas fa-code' };
                        const skillDiv = document.createElement('div');
                        skillDiv.className = 'relative group p-6 rounded-xl glassmorphic-dark transition-all duration-300 transform hover:scale-110 hover:shadow-2xl hover:shadow-primary-light fade-in';
                        skillDiv.style.transitionDelay = `${index * 0.2}s`;
                        skillDiv.innerHTML = `
                            <i class="${skill.icon || defaultSkill.icon} text-4xl text-primary-light mb-2"></i>
                            <p>${skill.name || defaultSkill.name}</p>
                            <div class="absolute inset-0 rounded-xl transition-opacity opacity-0 group-hover:opacity-100 backdrop-blur-md flex items-center justify-center p-2">
                                <p class="text-xs text-center leading-tight">Mastery in ${skill.name || defaultSkill.name}</p>
                            </div>
                        `;
                        skillsContainer.appendChild(skillDiv);
                    });

                    // Render projects
                    const projectsContainer = document.getElementById('projects-container');
                    projectsContainer.innerHTML = '';
                    data.projects.forEach((project, index) => {
                        const defaultProject = defaultData.projects[index] || { title: 'Untitled Project', desc: 'No description available.', image: 'https://placehold.co/600x400/48C9B0/1C2833?text=Project' };
                        const projectDiv = document.createElement('div');
                        projectDiv.className = 'glassmorphic-dark p-6 rounded-xl transition-all duration-300 hover:scale-105 project-card';
                        projectDiv.style.transitionDelay = `${index * 0.2}s`;
                        projectDiv.innerHTML = `
                            <img src="${project.image || defaultProject.image}" alt="${project.title || defaultProject.title}" class="w-full h-48 object-cover rounded-t-xl">
                            <div class="p-4">
                                <h3 class="text-2xl font-bold mb-2">${project.title || defaultProject.title}</h3>
                                <p class="text-sm">${project.desc || defaultProject.desc}</p>
                            </div>
                        `;
                        projectsContainer.appendChild(projectDiv);
                    });

                    // Re-observe elements for animations
                    document.querySelectorAll('.slide-up').forEach(el => observer.observe(el));
                } catch (error) {
                    console.error('Error loading data:', error);
                    document.getElementById('edit-form-status').textContent = 'Error loading portfolio: ' + error.message;
                    document.getElementById('edit-form-status').style.color = 'red';
                }
            };

            // Edit Button and Form Logic
            const editButton = document.getElementById('edit-button');
            const editFormContainer = document.getElementById('edit-form-container');
            const editForm = document.getElementById('edit-form');
            const cancelEdit = document.getElementById('cancel-edit');
            const cancelEditBtn = document.getElementById('cancel-edit-btn');
            const editFormStatus = document.getElementById('edit-form-status');

            editButton.addEventListener('click', async () => {
                await loadPortfolioData();
                editFormContainer.classList.remove('hidden');
            });

            const exitEditForm = () => {
                editFormContainer.classList.add('hidden');
                editForm.reset();
                editFormStatus.textContent = '';
            };

            cancelEdit.addEventListener('click', exitEditForm);
            cancelEditBtn.addEventListener('click', exitEditForm);

            editForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                editFormStatus.textContent = 'Saving...';
                try {
                    const profileImageFile = document.getElementById('edit-profile-image').files[0];
                    const profileImageUrl = await uploadToImgBB(profileImageFile);

                    const skills = [];
                    for (let i = 1; i <= 5; i++) {
                        const name = document.getElementById(`edit-skill${i}-name`).value.trim();
                        if (name) {
                            skills.push({
                                name,
                                icon: defaultData.skills[i-1]?.icon || 'fas fa-code'
                            });
                        }
                    }

                    const projects = [];
                    for (let i = 1; i <= 3; i++) {
                        const title = document.getElementById(`edit-project${i}-title`).value.trim();
                        const desc = document.getElementById(`edit-project${i}-desc`).value.trim();
                        const imageFile = document.getElementById(`edit-project${i}-image`).files[0];
                        const imageUrl = await uploadToImgBB(imageFile);
                        if (title || desc || imageUrl) {
                            projects.push({
                                title: title || undefined,
                                desc: desc || undefined,
                                image: imageUrl || undefined
                            });
                        }
                    }

                    const data = {
                        name: document.getElementById('edit-name').value.trim() || currentUserName,
                        title: document.getElementById('edit-title').value.trim() || undefined,
                        about: document.getElementById('edit-about').value.trim() || undefined,
                        profileImage: profileImageUrl || undefined,
                        skills,
                        projects
                    };

                    await savePortfolioData(data);
                } catch (error) {
                    console.error('Error uploading images or saving data:', error);
                    editFormStatus.textContent = 'Error uploading images or saving data: ' + error.message;
                    editFormStatus.style.color = 'red';
                }
            });

            // Theme setup
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;
            let isLightMode = false;
            
            themeToggle.addEventListener('click', () => {
                isLightMode = !isLightMode;
                if (isLightMode) {
                    body.classList.add('light-mode');
                    themeToggle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>';
                } else {
                    body.classList.remove('light-mode');
                    themeToggle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>';
                }
            });

            // Particle/Bokeh animation
            function createParticle(container) {
                const particle = document.createElement('div');
                particle.className = 'glowing-orb';
                const size = Math.random() * 20 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${Math.random() * 100}vh`;
                particle.style.animationDuration = `${Math.random() * 10 + 5}s`;
                particle.style.setProperty('--x', `${(Math.random() - 0.5) * 500}px`);
                particle.style.setProperty('--y', `${(Math.random() - 0.5) * 500}px`);
                container.appendChild(particle);

                particle.addEventListener('animationend', () => particle.remove());
            }

            const particleContainer = document.getElementById('particle-container');
            const bokehContainer = document.getElementById('bokeh-container');
            setInterval(() => createParticle(particleContainer), 500);
            setInterval(() => createParticle(bokehContainer), 1000);

            // Cursor Trail
            const cursorTrail = document.getElementById('cursor-trail');
            document.addEventListener('mousemove', (e) => {
                cursorTrail.style.opacity = '1';
                cursorTrail.style.transform = `translate(${e.clientX - 5}px, ${e.clientY - 5}px)`;
            });

            // Intersection Observer for slide-up effect
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.2 });

            // Floating Navbar
            window.addEventListener('scroll', () => {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 100) {
                    navbar.classList.remove('-translate-y-full');
                } else {
                    navbar.classList.add('-translate-y-full');
                }
            });
            
            // Smooth scrolling for CTA buttons
            document.getElementById('view-work-btn').addEventListener('click', (e) => {
                document.getElementById('projects').scrollIntoView({ behavior: 'smooth' });
            });
            document.getElementById('contact-me-btn').addEventListener('click', (e) => {
                document.getElementById('contact').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Testimonial Carousel
            let currentTestimonial = 0;
            const carouselWrapper = document.getElementById('carousel-wrapper');
            const testimonials = document.querySelectorAll('.carousel-item');
            
            window.nextTestimonial = () => {
                currentTestimonial = (currentTestimonial + 1) % testimonials.length;
                updateCarousel();
            };
            window.prevTestimonial = () => {
                currentTestimonial = (currentTestimonial - 1 + testimonials.length) % testimonials.length;
                updateCarousel();
            };
            const updateCarousel = () => {
                const offset = -currentTestimonial * 100;
                carouselWrapper.style.transform = `translateX(${offset}%)`;
            };

            // Project Modal
            const projectCards = document.querySelectorAll('.project-card');
            const projectModal = document.getElementById('project-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalDescription = document.getElementById('modal-description');
            
            projectCards.forEach(card => {
                card.addEventListener('click', () => {
                    modalTitle.textContent = card.querySelector('h3').textContent;
                    modalDescription.textContent = card.querySelector('p').textContent;
                    projectModal.style.display = 'flex';
                });
            });

            window.closeModal = () => projectModal.style.display = 'none';
            
            // Signature Animation
            const signaturePath = document.getElementById('signature-path');
            const pathLength = signaturePath.getTotalLength();
            signaturePath.style.strokeDasharray = pathLength;
            signaturePath.style.strokeDashoffset = pathLength;

            const signatureObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        signaturePath.style.transition = 'stroke-dashoffset 2s ease-in-out';
                        signaturePath.style.strokeDashoffset = '0';
                    }
                });
            }, { threshold: 0.5 });
            signatureObserver.observe(document.getElementById('signature-section'));

            // Initialize Firestore and load data
            const checkAuth = setInterval(() => {
                if (window.db && window.auth.currentUser) {
                    clearInterval(checkAuth);
                    loadPortfolioData();
                }
            }, 100);

            // Contact Form Submission
            const contactForm = document.getElementById('contact-form');
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formStatus = document.createElement('p');
                formStatus.className = 'text-center text-sm font-bold';
                contactForm.appendChild(formStatus);
                formStatus.textContent = 'Sending...';
                try {
                    const name = document.getElementById('name').value.trim();
                    const email = document.getElementById('email').value.trim();
                    const message = document.getElementById('message').value.trim();
                    if (!name || !email || !message) {
                        formStatus.textContent = 'Please fill out all fields.';
                        formStatus.style.color = 'red';
                        return;
                    }
                    await window.firestore.addDoc(window.firestore.collection(window.db, `artifacts/${window.appId}/public/data/contact-messages`), {
                        name,
                        email,
                        message,
                        timestamp: new Date()
                    });
                    formStatus.innerHTML = 'Message sent <span style="color: var(--primary-light);">âœ…</span>!';
                    contactForm.reset();
                    setTimeout(() => formStatus.remove(), 5000);
                } catch (error) {
                    console.error('Error adding document: ', error);
                    formStatus.textContent = 'Failed to send message: ' + error.message;
                    formStatus.style.color = 'red';
                }
            });
        });
    </script>
</body>
</html>